extends layout.pug

include utils.pug

block append head
     link(rel="stylesheet" type="text/css" href="/styles/feed.css")
     script(src="/scripts/feed.js" type="application/javascript")
block content
    div(class='container is-fluid mb-4')
        if locals.authenticated
            span(class='navbar-text px-4') Welcome back, #{user.firstName}!
        //- span(class='level-left navbar-text px-4') Welcome Greg
        //-     form(class='form-inline pr-4' action='/logout' method='post')
        //-         button(class='button is-warning' type='submit') Logout

    div(class="columns container is-fluid has-background-light")
        div(class="column ")
        div(class="column is-three-quarters")
            div() Feed:
              div(class='tableRows')
                thead
                  tr 
                    div(class='sOwnerDiv')
                      th(scope='col' class='sOwner') Survey Owner
                    div(class='sNameDiv' href="/feed/name")
                      a(scope='col' class='sName' href="/feed/name") Survey Name
                    div(class='sCreatedDiv' href="/feed/created")
                      a(scope='col' class='created' href="/feed/created") Created 
                    div(class='sModifiedDiv' href="/feed/modified")
                      a(scope='col' class='modified' href="/feed/modified") Modified
                    div(class='sQuestionDiv')
                      th(scope='col' class='questions') Questions
                    div(class='sOptionsDiv')
                      th(scope='col' class='options') Options
            if name  
              tbody               
                  each survey in nameFeedSurveys
                    li(class="box columns my-3")
                      p(class="column divider") #{survey.User.firstName}#{survey.User.lastName}
                      a(class="column divider" href=`/surveys/${survey.id}`) #{survey.name}
                      p(class="column divider") Created: #{survey.createdAt}
                      p(class="column divider") Modified: #{survey.updatedAt}
                      p(class="column divider") Questions:
                      p(class="column") Options (edit share delete dropdown)
            if mod  
              tbody               
                  each survey in modFeedSurveys
                    li(class="box columns my-3")
                      p(class="column divider") #{survey.User.firstName}#{survey.User.lastName}
                      a(class="column divider" href=`/surveys/${survey.id}`) #{survey.name}
                      p(class="column divider") Created: #{survey.createdAt}
                      p(class="column divider") Modified: #{survey.updatedAt}
                      p(class="column divider") Questions:
                      p(class="column") Options (edit share delete dropdown) 
            if cre  
              tbody               
                  each survey in createFeedSurveys
                    li(class="box columns my-3")
                      p(class="column divider") #{survey.User.firstName}#{survey.User.lastName}
                      a(class="column divider" href=`/surveys/${survey.id}`) #{survey.name}
                      p(class="column divider") Created: #{survey.createdAt}
                      p(class="column divider") Modified: #{survey.updatedAt}
                      p(class="column divider") Questions:
                      p(class="column") Options (edit share delete dropdown)                   
            div()
                a(class="button" href='/create-new-survey' id="createButton") + CREATE

  
